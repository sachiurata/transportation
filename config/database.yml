# PostgreSQL.
default: &default
  adapter: postgis
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  host: <%= ENV.fetch("POSTGRES_HOST", "localhost") %>
  # usernameのデフォルト値を設定します。
  # これにより、意図しないユーザー名（例: root）での接続を防ぎます。
  username: <%= ENV.fetch("POSTGRES_USER", "rails") %>
  password: <%= ENV.fetch("POSTGRES_PASSWORD", "") %>

development:
  <<: *default
  database: transportation_development
  # 開発環境用のユーザー名を明示的に指定
  username: <%= ENV.fetch("POSTGRES_USER", "vscode") %>

test:
  <<: *default
  database: transportation_test

production:
  # メインのアプリ用DB
  primary:
    url: <%= ENV["DATABASE_URL"] %>

  # SolidCable用 (primaryと同じDBを指定)
  cable:
    url: <%= ENV["DATABASE_URL"] %>

  # SolidQueue用 (primaryと同じDBを指定)
  queue:
    url: <%= ENV["DATABASE_URL"] %>

  # SolidCache用 (primaryと同じDBを指定)
  cache:
    url: <%= ENV["DATABASE_URL"] %>